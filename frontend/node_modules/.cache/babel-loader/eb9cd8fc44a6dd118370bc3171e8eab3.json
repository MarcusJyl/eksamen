{"ast":null,"code":"import token, { makeOptions, handleHttpErrors } from \"./fetchUtils\";\nimport { loginURL as URL } from \"./settings\";\n\nfunction apiFacade() {\n  const setToken = token => token.setToken(token);\n\n  const getToken = () => token.getToken();\n\n  const loggedIn = () => token.loggedIn();\n\n  const logout = () => token.logout();\n\n  const login = (user, password) => {\n    const options = makeOptions(\"POST\", true, {\n      username: user,\n      password: password\n    });\n    return fetch(URL + \"/api/login\", options).then(handleHttpErrors).then(res => {\n      token.setToken(res.token);\n    });\n  };\n\n  const signup = (username, password) => {\n    const options = makeOptions(\"POST\", true, {\n      username,\n      password\n    });\n    return fetch(\"http://localhost:8080/jpareststarter/api/signup\", options).then(handleHttpErrors);\n  };\n\n  const fetchUserRole = user => {\n    const options = makeOptions(\"GET\", true);\n    return fetch(URL + \"/api/info/\" + user, options).then(handleHttpErrors);\n  };\n\n  return {\n    login,\n    fetchUserRole,\n    setToken,\n    getToken,\n    loggedIn,\n    logout,\n    signup\n  };\n}\n\nconst facade = apiFacade();\nexport default facade;","map":{"version":3,"sources":["/Users/Marcus/CPHBUSINESS/3.semester/CA3_Personal_frontend/frontend/src/facades/LoginFacade.js"],"names":["token","makeOptions","handleHttpErrors","loginURL","URL","apiFacade","setToken","getToken","loggedIn","logout","login","user","password","options","username","fetch","then","res","signup","fetchUserRole","facade"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,gBAA7B,QAAqD,cAArD;AACA,SAASC,QAAQ,IAAIC,GAArB,QAAgC,YAAhC;;AAEA,SAASC,SAAT,GAAqB;AACnB,QAAMC,QAAQ,GAAIN,KAAD,IAAWA,KAAK,CAACM,QAAN,CAAeN,KAAf,CAA5B;;AACA,QAAMO,QAAQ,GAAG,MAAMP,KAAK,CAACO,QAAN,EAAvB;;AACA,QAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACQ,QAAN,EAAvB;;AACA,QAAMC,MAAM,GAAG,MAAMT,KAAK,CAACS,MAAN,EAArB;;AAEA,QAAMC,KAAK,GAAG,CAACC,IAAD,EAAOC,QAAP,KAAoB;AAChC,UAAMC,OAAO,GAAGZ,WAAW,CAAC,MAAD,EAAS,IAAT,EAAe;AACxCa,MAAAA,QAAQ,EAAEH,IAD8B;AAExCC,MAAAA,QAAQ,EAAEA;AAF8B,KAAf,CAA3B;AAIA,WAAOG,KAAK,CAACX,GAAG,GAAG,YAAP,EAAqBS,OAArB,CAAL,CACJG,IADI,CACCd,gBADD,EAEJc,IAFI,CAEEC,GAAD,IAAS;AACbjB,MAAAA,KAAK,CAACM,QAAN,CAAeW,GAAG,CAACjB,KAAnB;AACD,KAJI,CAAP;AAKD,GAVD;;AAYA,QAAMkB,MAAM,GAAG,CAACJ,QAAD,EAAWF,QAAX,KAAuB;AACpC,UAAMC,OAAO,GAAGZ,WAAW,CAAC,MAAD,EAAS,IAAT,EAAe;AACxCa,MAAAA,QADwC;AAExCF,MAAAA;AAFwC,KAAf,CAA3B;AAIA,WAAOG,KAAK,CAAC,iDAAD,EAAoDF,OAApD,CAAL,CAAkEG,IAAlE,CAAuEd,gBAAvE,CAAP;AACD,GAND;;AAQA,QAAMiB,aAAa,GAAIR,IAAD,IAAU;AAC9B,UAAME,OAAO,GAAGZ,WAAW,CAAC,KAAD,EAAQ,IAAR,CAA3B;AACA,WAAOc,KAAK,CAACX,GAAG,GAAG,YAAN,GAAqBO,IAAtB,EAA4BE,OAA5B,CAAL,CAA0CG,IAA1C,CAA+Cd,gBAA/C,CAAP;AACD,GAHD;;AAKA,SAAO;AACLQ,IAAAA,KADK;AAELS,IAAAA,aAFK;AAGLb,IAAAA,QAHK;AAILC,IAAAA,QAJK;AAKLC,IAAAA,QALK;AAMLC,IAAAA,MANK;AAOLS,IAAAA;AAPK,GAAP;AASD;;AACD,MAAME,MAAM,GAAGf,SAAS,EAAxB;AACA,eAAee,MAAf","sourcesContent":["import token, { makeOptions, handleHttpErrors } from \"./fetchUtils\";\nimport { loginURL as URL } from \"./settings\";\n\nfunction apiFacade() {\n  const setToken = (token) => token.setToken(token)\n  const getToken = () => token.getToken();\n  const loggedIn = () => token.loggedIn();\n  const logout = () => token.logout();\n\n  const login = (user, password) => {\n    const options = makeOptions(\"POST\", true, {\n      username: user,\n      password: password,\n    });\n    return fetch(URL + \"/api/login\", options)\n      .then(handleHttpErrors)\n      .then((res) => {\n        token.setToken(res.token);\n      });\n  };\n\n  const signup = (username, password) =>{\n    const options = makeOptions(\"POST\", true, {\n      username,\n      password\n    }); \n    return fetch(\"http://localhost:8080/jpareststarter/api/signup\", options).then(handleHttpErrors);\n  }\n\n  const fetchUserRole = (user) => {\n    const options = makeOptions(\"GET\", true); \n    return fetch(URL + \"/api/info/\" + user, options).then(handleHttpErrors);\n  };\n\n  return {\n    login,\n    fetchUserRole,\n    setToken,\n    getToken,\n    loggedIn,\n    logout,\n    signup\n  };\n}\nconst facade = apiFacade();\nexport default facade;\n"]},"metadata":{},"sourceType":"module"}