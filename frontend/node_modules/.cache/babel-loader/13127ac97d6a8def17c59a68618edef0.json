{"ast":null,"code":"const status = utils();\nexport function handleHttpErrors(res) {\n  if (!res.ok) {\n    return Promise.reject({\n      status: res.status,\n      fullError: res.json()\n    });\n  }\n\n  return res.json();\n}\nexport const makeOptions = (method, addToken, body) => {\n  var opts = {\n    method: method,\n    headers: {\n      \"Content-type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  };\n\n  if (addToken && status.loggedIn) {\n    opts.headers[\"x-access-token\"] = status.getToken();\n  }\n\n  if (body) {\n    opts.body = JSON.stringify(body);\n  }\n\n  return opts;\n};\n\nfunction utils() {\n  const setToken = token => {\n    localStorage.setItem(\"jwtToken\", token);\n  };\n\n  const getToken = () => {\n    return localStorage.getItem(\"jwtToken\");\n  };\n\n  const loggedIn = () => {\n    const loggedIn = getToken() != null;\n    console.log(loggedIn);\n    return loggedIn;\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"jwtToken\");\n  };\n\n  return {\n    setToken,\n    getToken,\n    loggedIn,\n    logout\n  };\n}\n\nexport default status; //  default token;","map":{"version":3,"sources":["/Users/Marcus/CPHBUSINESS/3.semester/exam/frontend/src/facades/fetchUtils.js"],"names":["status","utils","handleHttpErrors","res","ok","Promise","reject","fullError","json","makeOptions","method","addToken","body","opts","headers","Accept","loggedIn","getToken","JSON","stringify","setToken","token","localStorage","setItem","getItem","console","log","logout","removeItem"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,KAAK,EAApB;AAEA,OAAO,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;AACpC,MAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX,WAAOC,OAAO,CAACC,MAAR,CAAe;AAAEN,MAAAA,MAAM,EAAEG,GAAG,CAACH,MAAd;AAAsBO,MAAAA,SAAS,EAAEJ,GAAG,CAACK,IAAJ;AAAjC,KAAf,CAAP;AACD;;AACD,SAAOL,GAAG,CAACK,IAAJ,EAAP;AACD;AAED,OAAO,MAAMC,WAAW,GAAG,CAACC,MAAD,EAASC,QAAT,EAAmBC,IAAnB,KAA4B;AACrD,MAAIC,IAAI,GAAG;AACTH,IAAAA,MAAM,EAAEA,MADC;AAETI,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,MAAM,EAAE;AAFD;AAFA,GAAX;;AAOA,MAAIJ,QAAQ,IAAIX,MAAM,CAACgB,QAAvB,EAAiC;AAC/BH,IAAAA,IAAI,CAACC,OAAL,CAAa,gBAAb,IAAiCd,MAAM,CAACiB,QAAP,EAAjC;AACD;;AACD,MAAIL,IAAJ,EAAU;AACRC,IAAAA,IAAI,CAACD,IAAL,GAAYM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAZ;AACD;;AACD,SAAOC,IAAP;AACD,CAfM;;AAiBP,SAASZ,KAAT,GAAiB;AACf,QAAMmB,QAAQ,GAAIC,KAAD,IAAW;AAC1BC,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,KAAjC;AACD,GAFD;;AAGA,QAAMJ,QAAQ,GAAG,MAAM;AACrB,WAAOK,YAAY,CAACE,OAAb,CAAqB,UAArB,CAAP;AACD,GAFD;;AAGA,QAAMR,QAAQ,GAAG,MAAM;AACrB,UAAMA,QAAQ,GAAGC,QAAQ,MAAM,IAA/B;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAYV,QAAZ;AACA,WAAOA,QAAP;AACD,GAJD;;AAKA,QAAMW,MAAM,GAAG,MAAM;AACnBL,IAAAA,YAAY,CAACM,UAAb,CAAwB,UAAxB;AACD,GAFD;;AAGA,SAAO;AACLR,IAAAA,QADK;AAELH,IAAAA,QAFK;AAGLD,IAAAA,QAHK;AAILW,IAAAA;AAJK,GAAP;AAMD;;AAED,eAAe3B,MAAf,C,CAEA","sourcesContent":["const status = utils();\n\nexport function handleHttpErrors(res) {\n  if (!res.ok) {\n    return Promise.reject({ status: res.status, fullError: res.json() });\n  }\n  return res.json();\n}\n\nexport const makeOptions = (method, addToken, body) => {\n  var opts = {\n    method: method,\n    headers: {\n      \"Content-type\": \"application/json\",\n      Accept: \"application/json\",\n    },\n  };\n  if (addToken && status.loggedIn) {\n    opts.headers[\"x-access-token\"] = status.getToken();\n  }\n  if (body) {\n    opts.body = JSON.stringify(body);\n  }\n  return opts;\n};\n\nfunction utils() {\n  const setToken = (token) => {\n    localStorage.setItem(\"jwtToken\", token);\n  };\n  const getToken = () => {\n    return localStorage.getItem(\"jwtToken\");\n  };\n  const loggedIn = () => {\n    const loggedIn = getToken() != null;\n    console.log(loggedIn);\n    return loggedIn;\n  };\n  const logout = () => {\n    localStorage.removeItem(\"jwtToken\");\n  };\n  return {\n    setToken,\n    getToken,\n    loggedIn,\n    logout,\n  };\n}\n\nexport default status;\n\n//  default token;\n"]},"metadata":{},"sourceType":"module"}