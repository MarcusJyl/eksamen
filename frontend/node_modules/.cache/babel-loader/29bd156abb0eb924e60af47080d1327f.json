{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Marcus/CPHBUSINESS/3.semester/exam/frontend/src/components/Login.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport facade from \"../facades/LoginFacade\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Login.css\";\nimport { Link } from \"react-router-dom\";\n\nfunction Login({\n  login,\n  user\n}) {\n  _s();\n\n  const init = {\n    username: \"\",\n    password: \"\"\n  };\n  const [loginCredentials, setLoginCredentials] = useState(init);\n\n  const performLogin = evt => {\n    evt.preventDefault();\n    login(loginCredentials.username, loginCredentials.password);\n  };\n\n  const onChange = evt => {\n    setLoginCredentials({ ...loginCredentials,\n      [evt.target.id]: evt.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onChange: onChange,\n      className: \"form__group\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"input\",\n          className: \"form__field\",\n          placeholder: \"Name\",\n          name: \"username\",\n          id: \"username\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"input\",\n          className: \"form__field\",\n          placeholder: \"Password\",\n          name: \"password\",\n          id: \"password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: performLogin,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), user !== \"Loading...\" ? user : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \" \"\n    }, void 0, false), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/signup\",\n      children: \"Sign-up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"LeWSgD4xlHN7tBVuNfYhglgSv8w=\");\n\n_c = Login;\n\nfunction LoggedIn({\n  user,\n  setUser,\n  setUserRole,\n  setLoggedIn,\n  userRole\n}) {\n  _s2();\n\n  useEffect(() => {\n    setLoggedIn(true);\n\n    try {\n      facade.fetchUserRole(\"user\").then(data => {\n        setUserRole([...data.roles]);\n        setUser(data.name);\n      }).catch(err => {});\n      facade.fetchUserRole(\"admin\").then(data => {\n        setUserRole([...data.roles]);\n        setUser(data.name);\n      }).catch(err => {});\n    } catch (err) {\n      setLoggedIn(false);\n      console.log(err);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Data Received from server\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Hello \", user]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Your role is \", userRole.map(e => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\" \", e, \" \"]\n      }, void 0, true))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(LoggedIn, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c2 = LoggedIn;\n\nfunction LoginDisplay({\n  login,\n  setUser,\n  user,\n  loggedIn,\n  logout,\n  setUserRole,\n  userRole,\n  setLoggedIn\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: !loggedIn ? /*#__PURE__*/_jsxDEV(Login, {\n      login: login,\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(LoggedIn, {\n        userRole: userRole,\n        setUser: setUser,\n        user: user,\n        setUserRole: setUserRole,\n        setLoggedIn: setLoggedIn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: logout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n\n_c3 = LoginDisplay;\nexport default LoginDisplay;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"LoggedIn\");\n$RefreshReg$(_c3, \"LoginDisplay\");","map":{"version":3,"sources":["/Users/Marcus/CPHBUSINESS/3.semester/exam/frontend/src/components/Login.js"],"names":["facade","React","useState","useEffect","Link","Login","login","user","init","username","password","loginCredentials","setLoginCredentials","performLogin","evt","preventDefault","onChange","target","id","value","LoggedIn","setUser","setUserRole","setLoggedIn","userRole","fetchUserRole","then","data","roles","name","catch","err","console","log","map","e","LoginDisplay","loggedIn","logout"],"mappings":"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","sourcesContent":["import facade from \"../facades/LoginFacade\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Login.css\";\nimport { Link } from \"react-router-dom\";\n\nfunction Login({ login, user }) {\n  const init = { username: \"\", password: \"\" };\n  const [loginCredentials, setLoginCredentials] = useState(init);\n\n  const performLogin = (evt) => {\n    evt.preventDefault();\n    login(loginCredentials.username, loginCredentials.password);\n  };\n  const onChange = (evt) => {\n    setLoginCredentials({\n      ...loginCredentials,\n      [evt.target.id]: evt.target.value,\n    });\n  };\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onChange={onChange} className=\"form__group\">\n        <div className=\"input\">\n          <input\n            type=\"input\"\n            className=\"form__field\"\n            placeholder=\"Name\"\n            name=\"username\"\n            id=\"username\"\n            required\n          />\n        </div>\n        <div className=\"input\">\n          <input\n            type=\"input\"\n            className=\"form__field\"\n            placeholder=\"Password\"\n            name=\"password\"\n            id=\"password\"\n            required\n          />\n        </div>\n        <button onClick={performLogin}>Login</button>\n      </form>\n      {user !== \"Loading...\" ? user : <> </>}\n      <Link to=\"/signup\">Sign-up</Link>\n    </div>\n  );\n}\n\nfunction LoggedIn({ user, setUser, setUserRole, setLoggedIn, userRole }) {\n  useEffect(() => {\n    setLoggedIn(true);\n    try {\n      facade\n        .fetchUserRole(\"user\")\n        .then((data) => {\n          setUserRole([...data.roles]);\n          setUser(data.name);\n        })\n        .catch((err) => {});\n      facade\n        .fetchUserRole(\"admin\")\n        .then((data) => {\n          setUserRole([...data.roles]);\n          setUser(data.name);\n        })\n        .catch((err) => {});\n    } catch (err) {\n      setLoggedIn(false);\n      console.log(err);\n    }\n  }, []);\n\n  return (\n    <div>\n      <h2>Data Received from server</h2>\n      <h3>Hello {user}</h3>\n      <h3>Your role is {userRole.map(e => <> {e} </>)}</h3>\n    </div>\n  );\n}\n\nfunction LoginDisplay({\n  login,\n  setUser,\n  user,\n  loggedIn,\n  logout,\n  setUserRole,\n  userRole,\n  setLoggedIn,\n}) {\n  return (\n    <div className=\"login\">\n      {!loggedIn ? (\n        <Login login={login} user={user} />\n      ) : (\n        <div>\n          <LoggedIn\n            userRole={userRole}\n            setUser={setUser}\n            user={user}\n            setUserRole={setUserRole}\n            setLoggedIn={setLoggedIn}\n          />\n          <button onClick={logout}>Logout</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default LoginDisplay;\n"]},"metadata":{},"sourceType":"module"}